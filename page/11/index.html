<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shang.at","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="努力，奋斗">
<meta property="og:url" content="https://shang.at/page/11/index.html">
<meta property="og:site_name" content="努力，奋斗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="努力，奋斗">

<link rel="canonical" href="https://shang.at/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>努力，奋斗</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">努力，奋斗</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录学习</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Hadoop学习-Mapreduce编程模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Hadoop学习-Mapreduce编程模式/" class="post-title-link" itemprop="url">Hadoop学习-Mapreduce编程模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-25 09:26:50" itemprop="dateCreated datePublished" datetime="2020-06-25T09:26:50+08:00">2020-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-18 18:02:58" itemprop="dateModified" datetime="2020-12-18T18:02:58+08:00">2020-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop学习/" itemprop="url" rel="index"><span itemprop="name">Hadoop学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Hadoop-2.7.3</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Hive学习-安装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Hive学习-安装/" class="post-title-link" itemprop="url">Hive学习-安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-24 15:41:54" itemprop="dateCreated datePublished" datetime="2020-06-24T15:41:54+08:00">2020-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-04 22:15:46" itemprop="dateModified" datetime="2020-07-04T22:15:46+08:00">2020-07-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hive学习/" itemprop="url" rel="index"><span itemprop="name">Hive学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="配置过程"><a href="#配置过程" class="headerlink" title="配置过程"></a>配置过程</h4><ol>
<li><p>mysql</p>
<p>安装</p>
<p>配置可以远程连接</p>
</li>
<li><p>jdbc driver</p>
<p>hive使用的jdbc drive要与mysql的版本匹配</p>
</li>
<li><p>hive配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- hive-site.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://hostmachine:3306/metastore?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>the URL of the MySQL database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive1234<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>datanucleus.autoCreateSchema<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>datanucleus.fixedDatastore<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>datanucleus.autoStartMechanism<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>SchemaTable<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 配置数据存放在hdfs上的路径 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 配置metastore service 的节点 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://node2:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>IP address (or fully-qualified domain name) and port of the metastore host<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.schema.verification<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li></li>
</ol>
<h4 id="启动过程"><a href="#启动过程" class="headerlink" title="启动过程"></a>启动过程</h4><ol>
<li>首先启动hdfs：<code>start-dfs.sh</code></li>
<li>初始化metestore：<code>schematool --dbType mysql --initSchema</code></li>
<li>启动metastore service：<code>hive --service metastore</code></li>
<li>启动hive：<code>hive</code></li>
</ol>
<p><a href="https://www.jianshu.com/p/6108e0aed204" target="_blank" rel="noopener">https://www.jianshu.com/p/6108e0aed204</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/数据库-mysql-环境配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/数据库-mysql-环境配置/" class="post-title-link" itemprop="url">数据库-mysql-环境配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-24 14:16:33" itemprop="dateCreated datePublished" datetime="2020-06-24T14:16:33+08:00">2020-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-07 10:14:25" itemprop="dateModified" datetime="2020-12-07T10:14:25+08:00">2020-12-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>platform：MAC</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">brew istall mysql</span><br><span class="line"></span><br><span class="line">We've installed your MySQL database without a root password. To secure it run:</span><br><span class="line">    mysql_secure_installation</span><br><span class="line"></span><br><span class="line">MySQL is configured to only allow connections from localhost by default</span><br><span class="line"></span><br><span class="line">To connect run:</span><br><span class="line">    mysql -uroot</span><br><span class="line"></span><br><span class="line">To have launchd start mysql now and restart at login:</span><br><span class="line">  brew services start mysql</span><br><span class="line">Or, if you don't want/need a background service you can just run:</span><br><span class="line">  mysql.server start</span><br></pre></td></tr></table></figure>
<p>新安装的mysql，需要重置密码：</p>
<p>The initial root account may or may not have a password. Choose whichever of the following procedures applies:</p>
<ul>
<li><p>If the root account exists with an initial random password that has been expired, connect to the server as root using that password, then choose a new password. This is the case if the data directory was initialized using <a href="https://dev.mysql.com/doc/refman/8.0/en/mysqld.html" target="_blank" rel="noopener">mysqld —initialize</a>, either manually or using an installer that does not give you the option of specifying a password during the install operation. Because the password exists, you must use it to connect to the server. But because the password is expired, you cannot use the account for any purpose other than to choose a new password, until you do choose one.</p>
</li>
<li><ol>
<li>If you do not know the initial random password, look in the server error log.</li>
<li>Connect to the server as root using the password:</li>
</ol>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span> mysql -u root -p </span><br><span class="line">Enter password: (enter the random root password here)</span><br></pre></td></tr></table></figure>
<ul>
<li><ol>
<li>Choose a new password to replace the random password:</li>
</ol>
</li>
</ul>
<p>mysql&gt; ALTER USER ‘root’@’localhost’ IDENTIFIED BY ‘root-password’;</p>
<ul>
<li><p>If the root account exists but has no password, connect to the server as root using no password, then assign a password. This is the case if you initialized the data directory using <a href="https://dev.mysql.com/doc/refman/8.0/en/mysqld.html" target="_blank" rel="noopener">mysqld —initialize-insecure</a>.</p>
</li>
<li><ol>
<li>Connect to the server as root using no password:</li>
</ol>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span> mysql -u root --skip-password</span><br></pre></td></tr></table></figure>
<ul>
<li><ol>
<li>Assign a password:</li>
</ol>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span> ALTER USER 'root'@'localhost' IDENTIFIED BY 'root-password';</span><br></pre></td></tr></table></figure>
<p>After assigning the root account a password, you must supply that password whenever you connect to the server using the account. For example, to connect to the server using the <a href="https://dev.mysql.com/doc/refman/8.0/en/mysql.html" target="_blank" rel="noopener">mysql</a> client, use this command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span> mysql -u root -p </span><br><span class="line">Enter password: (enter root password here)</span><br></pre></td></tr></table></figure>
<p>To shut down the server with <a href="https://dev.mysql.com/doc/refman/8.0/en/mysqladmin.html" target="_blank" rel="noopener">mysqladmin</a>, use this command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span> mysqladmin -u root -p shutdown </span><br><span class="line">Enter password: (enter root password here)</span><br></pre></td></tr></table></figure>
<h3 id="设置远程访问"><a href="#设置远程访问" class="headerlink" title="设置远程访问"></a>设置远程访问</h3><h5 id="设置my-cnf"><a href="#设置my-cnf" class="headerlink" title="设置my.cnf"></a>设置my.cnf</h5><p>使用brew 安装的mysql，my.cnf文件在<code>/usr/local/etc/my.cnf</code>，修改<code>bind-address为0.0.0.0</code>，然后重启<code>brew services restart mysql</code></p>
<h5 id="创建用户，赋予权限"><a href="#创建用户，赋予权限" class="headerlink" title="创建用户，赋予权限"></a>创建用户，赋予权限</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 登录mysql</span><br><span class="line">mysql -u root -p 123456</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建新用户</span><br><span class="line">create user 'hive' identified by 'hive1234';</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 授权</span><br><span class="line">grant all privileges on *.* to 'hive'@'%' with grant option;</span><br><span class="line"><span class="meta">#</span> *.* 前边的*号指的是数据库，后面的*号指的是表，*.*的意思就是任意数据库下的任意表</span><br><span class="line"><span class="meta">#</span> 'root'@'%'，'root'用户名，'%'任意的主机名。</span><br><span class="line"><span class="meta">#</span> 这条配置信息就是说，允许任意节点以root身份登录，并且可以访问mysql里的任意库下的任意表</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 刷新</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<p>至此，便可以在其他host上访问mysql服务了。</p>
<h4 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h4><ol>
<li>jar记得更新</li>
<li>server 时区</li>
</ol>
<h4 id="如果不是新安装的mysql，那么可以按照以下的方式进行修改密码："><a href="#如果不是新安装的mysql，那么可以按照以下的方式进行修改密码：" class="headerlink" title="如果不是新安装的mysql，那么可以按照以下的方式进行修改密码："></a>如果不是新安装的mysql，那么可以按照以下的方式进行修改密码：</h4><p>cd /usr/local/mysql/bin</p>
<p>sudo ./mysqld_safe —skip-grant-tables &amp;</p>
<p>然后开启另一个终端tab，执行mysql -uroot -p，要求输入密码的时候直接回车即可登录成功</p>
<p>use mysql;<br>update user set authentication_string=’’ where user=’root’</p>
<p>flush privileges;</p>
<p>最后需要重新退出登录，然后正常重启mysql  server(—skip-grant-tables模式无法修改密码)，重新登录</p>
<p>修改密码</p>
<p>use mysql;</p>
<p>ALTER user ‘root’@’localhost’ IDENTIFIED BY ‘!Qwer1234’;</p>
<p>flush privileges;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Hadoop学习-Shell脚本学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Hadoop学习-Shell脚本学习/" class="post-title-link" itemprop="url">Hadoop学习-Shell脚本学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-24 13:28:09 / 修改时间：13:28:38" itemprop="dateCreated datePublished" datetime="2020-06-24T13:28:09+08:00">2020-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop学习/" itemprop="url" rel="index"><span itemprop="name">Hadoop学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/工具使用-iterm2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/工具使用-iterm2/" class="post-title-link" itemprop="url">工具使用-iterm2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-23 18:30:55 / 修改时间：18:32:31" itemprop="dateCreated datePublished" datetime="2020-06-23T18:30:55+08:00">2020-06-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具使用/" itemprop="url" rel="index"><span itemprop="name">工具使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">新建标签：command + t</span><br><span class="line">关闭标签：command + w</span><br><span class="line">切换标签：command + 数字 command + 左右方向键</span><br><span class="line">切换全屏：command + enter</span><br><span class="line">查找：command + f</span><br></pre></td></tr></table></figure>
<h3 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">垂直分屏：command + d</span><br><span class="line">水平分屏：command + shift + d</span><br><span class="line">切换屏幕：command + option + 方向键 command + [ 或 command + ]</span><br><span class="line">查看历史命令：command + ;</span><br><span class="line">查看剪贴板历史：command + shift + h</span><br></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">清除当前行：ctrl + u</span><br><span class="line">到行首：ctrl + a</span><br><span class="line">到行尾：ctrl + e</span><br><span class="line">前进后退：ctrl + f/b (相当于左右方向键)</span><br><span class="line">上一条命令：ctrl + p</span><br><span class="line">搜索命令历史：ctrl + r</span><br><span class="line">删除当前光标的字符：ctrl + d</span><br><span class="line">删除光标之前的字符：ctrl + h</span><br><span class="line">删除光标之前的单词：ctrl + w</span><br><span class="line">删除到文本末尾：ctrl + k</span><br><span class="line">交换光标处文本：ctrl + t</span><br><span class="line">清屏1：command + r</span><br><span class="line">清屏2：ctrl + l</span><br><span class="line">自带有哪些很实用的功能/快捷键</span><br><span class="line">⌘ + 数字在各 tab 标签直接来回切换</span><br><span class="line">选择即复制 + 鼠标中键粘贴，这个很实用</span><br><span class="line">⌘ + f 所查找的内容会被自动复制</span><br><span class="line">⌘ + d 横着分屏 / ⌘ + shift + d 竖着分屏</span><br><span class="line">⌘ + r = clear，而且只是换到新一屏，不会想 clear 一样创建一个空屏</span><br><span class="line">ctrl + u 清空当前行，无论光标在什么位置</span><br><span class="line">输入开头命令后 按 ⌘ + ; 会自动列出输入过的命令</span><br><span class="line">⌘ + shift + h 会列出剪切板历史</span><br><span class="line">可以在 Preferences &gt; keys 设置全局快捷键调出 iterm，这个也可以用过 Alfred 实现</span><br></pre></td></tr></table></figure>
<h3 id="常用的一些快捷键"><a href="#常用的一些快捷键" class="headerlink" title="常用的一些快捷键"></a>常用的一些快捷键</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">⌘ + 1 / 2 左右 tab 之间来回切换，这个在 前面 已经介绍过了</span><br><span class="line">⌘← / ⌘→ 到一行命令最左边/最右边 ，这个功能同 C+a / C+e</span><br><span class="line">⌥← / ⌥→ 按单词前移/后移，相当与 C+f / C+b，其实这个功能在Iterm中已经预定义好了，⌥f / ⌥b，看个人习惯了</span><br><span class="line">好像就这几个</span><br><span class="line"></span><br><span class="line">设置方法如下</span><br><span class="line">当然除了这些可以自定义的也不能忘了 linux 下那些好用的组合</span><br><span class="line">C+a / C+e 这个几乎在哪都可以使用</span><br><span class="line">C+p / !! 上一条命令</span><br><span class="line">C+k 从光标处删至命令行尾 (本来 C+u 是删至命令行首，但iterm中是删掉整行)</span><br><span class="line">C+w A+d 从光标处删至字首/尾</span><br><span class="line">C+h C+d 删掉光标前后的自负</span><br><span class="line">C+y 粘贴至光标后</span><br><span class="line">C+r 搜索命令历史，这个较常用</span><br></pre></td></tr></table></figure>
<h3 id="选中即复制"><a href="#选中即复制" class="headerlink" title="选中即复制"></a>选中即复制</h3><h4 id="iterm2-有-2-种好用的选中即复制模式。"><a href="#iterm2-有-2-种好用的选中即复制模式。" class="headerlink" title="iterm2 有 2 种好用的选中即复制模式。"></a>iterm2 有 2 种好用的选中即复制模式。</h4><ul>
<li>一种是用鼠标，在 iterm2 中，选中某个路径或者某个词汇，那么，iterm2 就自动复制了。 　　</li>
<li>另一种是无鼠标模式，<code>command+f</code>,弹出 iterm2 的查找模式，输入要查找并复制的内容的前几个字母，确认找到的是自己的内容之后，输入 <code>tab</code>，查找窗口将自动变化内容，并将其复制。如果输入的是 <code>shift+tab</code>，则自动将查找内容的左边选中并复制。</li>
</ul>
<h3 id="自动完成"><a href="#自动完成" class="headerlink" title="自动完成"></a>自动完成</h3><p>输入打头几个字母，然后输入 <code>command+</code>; iterm2 将自动列出之前输入过的类似命令。 　　</p>
<h3 id="剪切历史"><a href="#剪切历史" class="headerlink" title="剪切历史"></a>剪切历史</h3><p>输入 <code>command+shift+h</code>，iterm2 将自动列出剪切板的历史记录。如果需要将剪切板的历史记录保存到磁盘，在 <code>Preferences &gt; General &gt; Save copy/paste history to disk</code> 中设置。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Hadoop学习-源码编译/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Hadoop学习-源码编译/" class="post-title-link" itemprop="url">Hadoop学习-源码编译</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-23 18:18:16 / 修改时间：18:19:33" itemprop="dateCreated datePublished" datetime="2020-06-23T18:18:16+08:00">2020-06-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop学习/" itemprop="url" rel="index"><span itemprop="name">Hadoop学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Hadoop学习-集群搭建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Hadoop学习-集群搭建/" class="post-title-link" itemprop="url">Hadoop学习-集群搭建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-23 18:17:38" itemprop="dateCreated datePublished" datetime="2020-06-23T18:17:38+08:00">2020-06-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-26 11:45:57" itemprop="dateModified" datetime="2020-06-26T11:45:57+08:00">2020-06-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop学习/" itemprop="url" rel="index"><span itemprop="name">Hadoop学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> hadoop.sh -&gt; /etc/profile.d/</span><br><span class="line">export HADOOP_PREFIX=/root/hadoop</span><br><span class="line">export HADOOP_YARN_HOME=$&#123;HADOOP_PREFIX&#125;</span><br><span class="line">export HADOOP_CONF_DIR=$&#123;HADOOP_PREFIX&#125;/etc/hadoop</span><br><span class="line">export YARN_LOG_DIR=$&#123;HADOOP_YARN_HOME&#125;/logs</span><br><span class="line">export YARN_IDENT_STRING=root</span><br><span class="line">export HADOOP_MAPRED_IDENT_STRING=root</span><br><span class="line">export PATH=$&#123;HADOOP_PREFIX&#125;/bin:$&#123;HADOOP_PREFIX&#125;/sbin:$&#123;PATH&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- core-site.xml -&gt; path_to_hadoop/etc/hadoop/ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-common/core-default.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://node4:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///root/data/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">description</span>&gt;</span>A base for other temporary directories.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- hdfs-site.xml -&gt; path_to_hadoop/etc/hadoop/ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///root/data/hadoop/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///root/data/hadoop/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- config secondary namenode --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>node3:50090<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- enable webhdfs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.webhdfs.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- disable permissions; only for development, of course --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.handler.count<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>5<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.handler.count<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>5<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- yarn-site.xml -&gt; path_to_hadoop/etc/hadoop/ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://hadoop.apache.org/docs/r2.7.3/hadoop-yarn/hadoop-yarn-common/yarn-default.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- enable log aggregation, this is false by default --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.timeline-service.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mapred-site.xml -&gt; path_to_hadoop/etc/hadoop/ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://hadoop.apache.org/docs/r2.7.3/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>node3:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="启动流程"><a href="#启动流程" class="headerlink" title="启动流程"></a>启动流程</h2><p>Step1. 第一次启动HDFS，需要格式化一下hdfs</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>HADOOP_PREFIX/bin/hdfs namenode -format &lt;cluster-name&gt;</span><br></pre></td></tr></table></figure>
<p>Step2. 启动</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">start-dfs</span>.sh</span><br><span class="line"><span class="built_in">start-yarn</span>.sh</span><br><span class="line">yarn<span class="literal">-daemon</span>.sh start proxyserver</span><br><span class="line">mr<span class="literal">-jobhistory</span><span class="literal">-daemon</span>.sh start historyserver</span><br></pre></td></tr></table></figure>
<h2 id="停止流程"><a href="#停止流程" class="headerlink" title="停止流程"></a>停止流程</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stop-dfs.sh</span><br><span class="line">stop-yarn.sh</span><br><span class="line">yarn-daemon.sh stop proxyserver</span><br><span class="line">mr-jobhistory-daemon.sh stop historyserver</span><br></pre></td></tr></table></figure>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><p>Once the Hadoop cluster is up and running check the web-ui of the components as described below:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Daemon</th>
<th style="text-align:left">Web Interface</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">NameNode</td>
<td style="text-align:left"><a href="http://nn_host:port/" target="_blank" rel="noopener">http://nn_host:port/</a></td>
<td style="text-align:left">Default HTTP port is 50070.</td>
</tr>
<tr>
<td style="text-align:left">SecondaryNameNode</td>
<td style="text-align:left"><a href="http://nn_host:port/" target="_blank" rel="noopener">http://nn_host:port/</a></td>
<td style="text-align:left">Default HTTP port is 50090.</td>
</tr>
<tr>
<td style="text-align:left">ResourceManager</td>
<td style="text-align:left"><a href="http://rm_host:port/" target="_blank" rel="noopener">http://rm_host:port/</a></td>
<td style="text-align:left">Default HTTP port is 8088.</td>
</tr>
<tr>
<td style="text-align:left">YarnWebProxy</td>
<td style="text-align:left"><a href="http://proxy_host:port/" target="_blank" rel="noopener">http://proxy_host:port/</a></td>
<td style="text-align:left">no Default HTTP port. 需要自定义</td>
</tr>
<tr>
<td style="text-align:left">MapReduce JobHistory Server</td>
<td style="text-align:left"><a href="http://jhs_host:port/" target="_blank" rel="noopener">http://jhs_host:port/</a></td>
<td style="text-align:left">Default HTTP port is 19888.</td>
</tr>
</tbody>
</table>
</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Hadoop学习-配置详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Hadoop学习-配置详解/" class="post-title-link" itemprop="url">Hadoop学习-配置详解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-23 17:12:52" itemprop="dateCreated datePublished" datetime="2020-06-23T17:12:52+08:00">2020-06-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-26 10:48:44" itemprop="dateModified" datetime="2020-06-26T10:48:44+08:00">2020-06-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop学习/" itemprop="url" rel="index"><span itemprop="name">Hadoop学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>版本：<a href="https://hadoop.apache.org/docs/r2.7.3/" target="_blank" rel="noopener">2.7.3</a></p>
<h3 id="core-default-xml"><a href="#core-default-xml" class="headerlink" title="core-default.xml"></a>core-default.xml</h3><div class="table-container">
<table>
<thead>
<tr>
<th>parameter</th>
<th>default value</th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fs.defaultFS</code></td>
<td><code>file:///</code></td>
<td>定义<code>namenode</code>的URI，改成<code>hdfs://host:port/</code></td>
</tr>
<tr>
<td><code>hadoop.tmp.dir</code></td>
<td><code>/tmp/hadoop-${user.name}</code></td>
<td>定义其他临时目录的根目录</td>
</tr>
<tr>
<td><code>io.file.buffer.size</code></td>
<td><code>4096</code></td>
<td>读写文件操作时的缓存字节数，必须是硬件上的内存页大小的整数倍</td>
</tr>
</tbody>
</table>
</div>
<h3 id="hdfs-default-xml"><a href="#hdfs-default-xml" class="headerlink" title="hdfs-default.xml"></a>hdfs-default.xml</h3><h4 id="namenode"><a href="#namenode" class="headerlink" title="namenode"></a>namenode</h4><div class="table-container">
<table>
<thead>
<tr>
<th>parameter</th>
<th>default value</th>
<th>note</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dfs.namenode.http(s)-address</code></td>
<td><code>0.0.0.0:50070(50470)</code></td>
<td>配置<code>dfs</code>的<code>web ui</code>界面，不建议修改。可以通过<code>http://namenode_hostname:50070</code>访问</td>
</tr>
<tr>
<td><code>dfs.namenode.name.dir</code></td>
<td><code>file://${hadoop.tmp.dir}/dfs/name</code></td>
<td>配置<code>DFS namenode</code>的<code>fsimage</code>文件存放在本次文件系统的路径。如果配置了使用逗号分隔的多个路径，那么namemode会在每个目录下面都冗余的存放一份。</td>
</tr>
<tr>
<td><code>dfs.namenode.edits.dir</code></td>
<td><code>dfs.namenode.name.dir</code></td>
<td>配置<code>DFS namenode</code>的<code>edits</code>文件存放在本次文件系统的路径。如果配置了使用逗号分隔的多个路径，那么namemode会在每个目录下面都冗余的存放一份。</td>
</tr>
<tr>
<td><code>dfs.namenode.fs-limits.min-block-size</code></td>
<td><code>1048576</code>  <code>1m</code></td>
<td>最小块大小（以字节为单位），由Namenode在创建时强制执行。这样可以防止意外创建具有很小块大小（因此有很多块）的文件，这会降低性能。减少数据块的数量，</td>
</tr>
<tr>
<td><code>dfs.namenode.handler.count</code></td>
<td><code>10</code></td>
<td>namenode端服务的线程数，测试时可以配置的小一些，减少内存占用</td>
</tr>
</tbody>
</table>
</div>
<h4 id="datanode"><a href="#datanode" class="headerlink" title="datanode"></a>datanode</h4><div class="table-container">
<table>
<thead>
<tr>
<th>parameter</th>
<th>default value</th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dfs.datanode.data.dir</code></td>
<td><code>file://${hadoop.tmp.dir}/dfs/data</code></td>
<td>文件块的在<code>local filesystem</code>中的存放路径。如果提供的是逗号分隔的目录列表，那么数据将会存储在所有的目录中，(通常目录列表是在不同的设备上)。目录应该被相应的存储类型所标记(HDFS上有四种存储设备：SSD、DISK、ARCHIVE、RAM_DISK)，如果没有指定，默认是DISK。如果目录不存在，那么会自动创建(需要获取目录权限)</td>
</tr>
<tr>
<td><code>dfs.datanode.handler.count</code></td>
<td><code>10</code></td>
<td>namenode端服务的线程数，测试时可以配置的小一些，减少内存占用</td>
</tr>
</tbody>
</table>
</div>
<h4 id="secondary-namenode"><a href="#secondary-namenode" class="headerlink" title="secondary namenode"></a>secondary namenode</h4><div class="table-container">
<table>
<thead>
<tr>
<th>parameter</th>
<th>default value</th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dfs.namenode.secondary.http(s)-address</code></td>
<td><code>0.0.0.0:50090(50091)</code></td>
<td>配置<code>secondary namenode</code>的http server和端口</td>
</tr>
<tr>
<td><code>dfs.namenode.checkpoint.dir</code></td>
<td><code>file://${hadoop.tmp.dir}/dfs/namesecondary</code></td>
<td></td>
</tr>
<tr>
<td><code>dfs.namenode.checkpoint.edits.dir</code></td>
<td><code>${dfs.namenode.checkpoint.dir}</code></td>
<td></td>
</tr>
<tr>
<td><code>dfs.namenode.checkpoint.period</code></td>
<td><code>3600</code></td>
<td></td>
</tr>
<tr>
<td><code>dfs.namenode.checkpoint.txns</code></td>
<td><code>1000000</code></td>
<td></td>
</tr>
<tr>
<td><code>dfs.namenode.checkpoint.check.period</code></td>
<td><code>60</code></td>
<td></td>
</tr>
<tr>
<td><code>dfs.namenode.checkpoint.max-retries</code></td>
<td><code>3</code></td>
<td></td>
</tr>
<tr>
<td><code>dfs.namenode.num.checkpoints.retained</code></td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="dfs"><a href="#dfs" class="headerlink" title="dfs"></a>dfs</h4><div class="table-container">
<table>
<thead>
<tr>
<th>parameter</th>
<th>default value</th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dfs.permissions.enabled</code></td>
<td><code>true</code></td>
<td>配置是否启用权限检查，默认是启用的。测试时可以设置为false。当开启状态时，dfs不会检测文件的权限检测。<a href="https://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html" target="_blank" rel="noopener">HDFS Permission</a>HDFS默认启动namenode的user为superuser，这个</td>
</tr>
<tr>
<td><code>dfs.blocksize</code></td>
<td><code>134217728</code>  <code>128m</code></td>
<td>单位字节，新文件的block 大小</td>
</tr>
<tr>
<td><code>dfs.hosts</code> / <code>dfs.hosts.exclude</code></td>
<td></td>
<td>List of permitted/excluded DataNodes.If necessary, use these files to control the list of allowable datanodes.</td>
</tr>
<tr>
<td><code>dfs.replication</code></td>
<td><code>3</code></td>
<td>块副本数</td>
</tr>
<tr>
<td><code>dfs.webhdfs.enabled</code></td>
<td><code>true</code></td>
<td>启动namenode和datanode上的WebHHDFS(REST API)</td>
</tr>
</tbody>
</table>
</div>
<h3 id="mapred-default-xml"><a href="#mapred-default-xml" class="headerlink" title="mapred-default.xml"></a>mapred-default.xml</h3><h4 id="MapReduce-Applications"><a href="#MapReduce-Applications" class="headerlink" title="MapReduce Applications"></a>MapReduce Applications</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">Value</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>mapreduce.framework.name</code></td>
<td style="text-align:left"><code>yarn</code></td>
<td style="text-align:left">Execution framework set to Hadoop YARN.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.map.memory.mb</code></td>
<td style="text-align:left"><code>1536</code></td>
<td style="text-align:left">Larger resource limit for maps.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.map.java.opts</code></td>
<td style="text-align:left"><code>-Xmx1024M</code></td>
<td style="text-align:left">Larger heap-size for child jvms of maps.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.reduce.memory.mb</code></td>
<td style="text-align:left"><code>3072</code></td>
<td style="text-align:left">Larger resource limit for reduces.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.reduce.java.opts</code></td>
<td style="text-align:left"><code>-Xmx2560M</code></td>
<td style="text-align:left">Larger heap-size for child jvms of reduces.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.task.io.sort.mb</code></td>
<td style="text-align:left"><code>100</code></td>
<td style="text-align:left">Higher memory-limit while sorting data for efficiency.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.task.io.sort.factor</code></td>
<td style="text-align:left"><code>10</code></td>
<td style="text-align:left">More streams merged at once while sorting files.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.reduce.shuffle.parallelcopies</code></td>
<td style="text-align:left"><code>5</code></td>
<td style="text-align:left">Higher number of parallel copies run by reduces to fetch outputs from very large number of maps.</td>
</tr>
</tbody>
</table>
</div>
<h4 id="MapReduce-JobHistory-Server"><a href="#MapReduce-JobHistory-Server" class="headerlink" title="MapReduce JobHistory Server"></a>MapReduce JobHistory Server</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">Value</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>mapreduce.jobhistory.address</code></td>
<td style="text-align:left"><code>0.0.0.0:10020</code></td>
<td style="text-align:left">MapReduce JobHistory Server IPC host:port</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.jobhistory.webapp.address</code></td>
<td style="text-align:left"><code>0.0.0.0:19888</code></td>
<td style="text-align:left">MapReduce JobHistory Server Web UI host:port</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.app.mapreduce.am.staging-dir</code></td>
<td style="text-align:left"><code>/tmp/hadoop-yarn/staging</code></td>
<td style="text-align:left">The staging dir used while submitting jobs.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.jobhistory.intermediate-done-dir</code></td>
<td style="text-align:left"><code>${yarn.app.mapreduce.am.staging-dir}/history/done_intermediate</code></td>
<td style="text-align:left">Directory where history files are written by MapReduce jobs.</td>
</tr>
<tr>
<td style="text-align:left"><code>mapreduce.jobhistory.done-dir</code></td>
<td style="text-align:left"><code>${yarn.app.mapreduce.am.staging-dir}/history/done</code></td>
<td style="text-align:left">Directory where history files are managed by the MR JobHistory Server.</td>
</tr>
</tbody>
</table>
</div>
<h3 id="yarn-default-xml"><a href="#yarn-default-xml" class="headerlink" title="yarn-default.xml"></a>yarn-default.xml</h3><h4 id="ResourceManager-and-NodeManager"><a href="#ResourceManager-and-NodeManager" class="headerlink" title="ResourceManager and NodeManager"></a>ResourceManager and NodeManager</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">default Value</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>yarn.acl.enable</code></td>
<td style="text-align:left"><code>false</code></td>
<td style="text-align:left">是否开启ACLs</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.admin.acl</code></td>
<td style="text-align:left"><code>*</code></td>
<td style="text-align:left">ACL to set admins on the cluster. ACLs are of for <em>comma-separated-usersspacecomma-separated-groups</em>. Defaults to special value of <strong>*</strong> which means <em>anyone</em>. Special value of just <em>space</em> means no one has access.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.log-aggregation-enable</code></td>
<td style="text-align:left"><code>false</code></td>
<td style="text-align:left">是否启动日志聚合。日志聚合会收集每个container的日志并且在应用完成后将他们移动到HDFS中。具体目录由下面两个选项配置<code>yarn.nodemanager.remote-app-log-dir</code>和<code>yarn.nodemanager.remote-app-log-dir-suffix</code>。用户可以通过<code>Application Timeline Server</code>访问这些日志文件</td>
</tr>
</tbody>
</table>
</div>
<h4 id="ResourceManager"><a href="#ResourceManager" class="headerlink" title="ResourceManager"></a>ResourceManager</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">default Value</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.address</code></td>
<td style="text-align:left"><code>${yarn.resourcemanager.hostname}:8032</code></td>
<td style="text-align:left">配置RM的URI<br>for clients to submit jobs.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.scheduler.address</code></td>
<td style="text-align:left"><code>${yarn.resourcemanager.hostname}:8030</code></td>
<td style="text-align:left">资源调度器URI<br>for ApplicationMasters to talk to Scheduler to obtain resources.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.resource-tracker.address</code></td>
<td style="text-align:left"><code>${yarn.resourcemanager.hostname}:8031</code></td>
<td style="text-align:left">for NodeManagers.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.admin.address</code></td>
<td style="text-align:left"><code>${yarn.resourcemanager.hostname}:8033</code></td>
<td style="text-align:left">for administrative commands.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.webapp.address</code></td>
<td style="text-align:left"><code>${yarn.resourcemanager.hostname}:8088</code></td>
<td style="text-align:left">RM web application</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.hostname</code></td>
<td style="text-align:left"><code>0.0.0.0</code></td>
<td style="text-align:left"><code>ResourceManager</code> host.应该改成特定的hostname</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.web-proxy.address</code></td>
<td style="text-align:left">默认没有配置，会作为RM的一部分运行</td>
<td style="text-align:left">The address for the web proxy as HOST:PORT, if this is not given then the proxy will run as part of the RM</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.scheduler.class</code></td>
<td style="text-align:left"><code>org.apache.hadoop.yarn.server.resourcemanager.&lt;br /&gt;scheduler.capacity.CapacityScheduler</code></td>
<td style="text-align:left">指定RM使用的调度器：<code>CapacityScheduler</code> (recommended), <code>FairScheduler</code> (also recommended), or <code>FifoScheduler</code></td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.scheduler.minimum-allocation-mb</code></td>
<td style="text-align:left"><code>1024</code></td>
<td style="text-align:left">In MBs，Minimum limit of memory to allocate to each container request at the <code>ResourceManager</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.scheduler.maximum-allocation-mb</code></td>
<td style="text-align:left"><code>8192</code></td>
<td style="text-align:left">In MBs，Maximum limit of memory to allocate to each container request at the <code>Resource Manager</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.resourcemanager.nodes.include-path</code> / <code>yarn.resourcemanager.nodes.exclude-path</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">List of permitted/excluded NodeManagers.If necessary, use these files to control the list of allowable NodeManagers.</td>
</tr>
</tbody>
</table>
</div>
<h4 id="NodeManager"><a href="#NodeManager" class="headerlink" title="NodeManager"></a>NodeManager</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">default Value</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.resource.memory-mb</code></td>
<td style="text-align:left"><code>8192</code></td>
<td style="text-align:left">Resource i.e. available physical memory, in MB, for given <code>NodeManager</code>.Defines total available resources on the <code>NodeManager</code> to be made available to running containers</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.vmem-pmem-ratio</code></td>
<td style="text-align:left"><code>2.1</code><br>Maximum ratio by which virtual memory usage of tasks may exceed physical memory</td>
<td style="text-align:left">The virtual memory usage of each task may exceed its physical memory limit by this ratio. The total amount of virtual memory used by tasks on the NodeManager may exceed its physical memory usage by this ratio.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.local-dirs</code></td>
<td style="text-align:left"><code>${hadoop.tmp.dir}/nm-local-dir</code><br>Comma-separated list of paths on the local filesystem where intermediate data is written.</td>
<td style="text-align:left">Multiple paths help spread disk i/o.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.log-dirs</code></td>
<td style="text-align:left"><code>${yarn.log.dir}/userlogs</code><br>Comma-separated list of paths on the local filesystem where logs are written.</td>
<td style="text-align:left">Multiple paths help spread disk i/o.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.log.retain-seconds</code></td>
<td style="text-align:left"><em>10800</em></td>
<td style="text-align:left">Default time (in seconds) to retain log files on the NodeManager. Only applicable if log-aggregation is disabled.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.remote-app-log-dir</code></td>
<td style="text-align:left"><code>/tmp/logs</code></td>
<td style="text-align:left">HDFS directory where the application logs are moved on application completion. Need to set appropriate permissions. Only applicable if log-aggregation is enabled.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.remote-app-log-dir-suffix</code></td>
<td style="text-align:left"><code>logs</code></td>
<td style="text-align:left">Suffix appended to the remote log dir. Logs will be aggregated to <code>${yarn.nodemanager.remote-app-log-dir}/${user}/${thisParam}</code> Only applicable if log-aggregation is enabled.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.nodemanager.aux-services</code></td>
<td style="text-align:left"><code>mapreduce_shuffle</code></td>
<td style="text-align:left">Shuffle service that needs to be set for Map Reduce applications.</td>
</tr>
</tbody>
</table>
</div>
<h4 id="History-Server-Needs-to-be-moved-elsewhere"><a href="#History-Server-Needs-to-be-moved-elsewhere" class="headerlink" title="History Server (Needs to be moved elsewhere)"></a>History Server (Needs to be moved elsewhere)</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">default Value</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>yarn.log-aggregation.retain-seconds</code></td>
<td style="text-align:left"><code>-1</code></td>
<td style="text-align:left">How long to keep aggregation logs before deleting them. -1 disables. Be careful, set this too small and you will spam the name node.</td>
</tr>
<tr>
<td style="text-align:left"><code>yarn.log-aggregation.retain-check-interval-seconds</code></td>
<td style="text-align:left"><code>-1</code></td>
<td style="text-align:left">Time between checks for aggregated log retention. If set to 0 or a negative value then the value is computed as one-tenth of the aggregated log retention time. Be careful, set this too small and you will spam the name node.</td>
</tr>
</tbody>
</table>
</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/Shell编程-常用命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/Shell编程-常用命令/" class="post-title-link" itemprop="url">Shell编程-常用命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-23 16:53:17" itemprop="dateCreated datePublished" datetime="2020-06-23T16:53:17+08:00">2020-06-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-10 10:38:20" itemprop="dateModified" datetime="2021-02-10T10:38:20+08:00">2021-02-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell编程/" itemprop="url" rel="index"><span itemprop="name">Shell编程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="文本编辑"><a href="#文本编辑" class="headerlink" title="文本编辑"></a>文本编辑</h4><h5 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h5><h5 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h5><h4 id="磁盘系统"><a href="#磁盘系统" class="headerlink" title="磁盘系统"></a>磁盘系统</h4><h5 id="df"><a href="#df" class="headerlink" title="df"></a>df</h5><p>查看磁盘使用量：<code>df -hT</code></p>
<h5 id="du"><a href="#du" class="headerlink" title="du"></a>du</h5><p>查看各文件夹大小：<code>du -h --max-depth=1 /path</code></p>
<h4 id="Linux上的定时器"><a href="#Linux上的定时器" class="headerlink" title="Linux上的定时器"></a>Linux上的定时器</h4><h5 id="cron"><a href="#cron" class="headerlink" title="cron"></a>cron</h5><h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><h5 id="xargs"><a href="#xargs" class="headerlink" title="xargs"></a>xargs</h5><h5 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h5><h5 id="find-grep"><a href="#find-grep" class="headerlink" title="find grep"></a>find grep</h5><ol>
<li>从文件内容查找匹配指定字符串的行：<br>$ grep “被查找的字符串” 文件名<br>例子：在当前目录里第一级文件夹中寻找包含指定字符串的.in文件<br>grep “thermcontact” <em>/</em>.in</li>
<li>从文件内容查找与正则表达式匹配的行：<br>$ grep –e “正则表达式” 文件名</li>
<li>查找时不区分大小写：<br>$ grep –i “被查找的字符串” 文件名</li>
<li>查找匹配的行数：<br>$ grep -c “被查找的字符串” 文件名</li>
<li>从文件内容查找不匹配指定字符串的行：<br>$ grep –v “被查找的字符串” 文件名</li>
<li>从根目录开始查找所有扩展名为.log的文本文件，并找出包含”ERROR”的行<br>find / -type f -name “<em>.log” | xargs grep “ERROR”<br>例子：从当前目录开始查找所有扩展名为.in的文本文件，并找出包含”thermcontact”的行<br>find . -name “</em>.in” | xargs grep “thermcontact”</li>
</ol>
<h4 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h4><h5 id="top"><a href="#top" class="headerlink" title="top"></a>top</h5><p><a href="https://blog.csdn.net/hsd2012/article/details/51387332" target="_blank" rel="noopener">https://blog.csdn.net/hsd2012/article/details/51387332</a></p>
<h5 id="strace"><a href="#strace" class="headerlink" title="strace"></a>strace</h5><blockquote>
<p>strace 命令是一种强大的工具, 能够显示任何由用户空间程式发出的系统调用. strace 显示这些调用的参数并返回符号形式的值. strace 从内核接收信息, 而且无需以任何特别的方式来构建内核. strace 的每一行输出包括系统调用名称, 然后是参数和返回值.</p>
</blockquote>
<h4 id="远程控制"><a href="#远程控制" class="headerlink" title="远程控制"></a>远程控制</h4><h5 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h5><h5 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 复制某文件(夹) 到远程地址</span><br><span class="line">scp [-r] xxxxx user@host:path</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 如果要求是同一个目录可以直接用如下写法</span><br><span class="line">scp [-r] xxxxx user@host:`pwd`</span><br></pre></td></tr></table></figure>
<h5 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h5><h4 id="软件管理"><a href="#软件管理" class="headerlink" title="软件管理"></a>软件管理</h4><h5 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h5><p>RPM 全名是『 RedHat Package Manager </p>
<h6 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">rpm -i *.rpm # 安装rpm包</span><br><span class="line"></span><br><span class="line">rpm -ivh *.rmp</span><br><span class="line">选项与参数：</span><br><span class="line">-i ：install 的意思</span><br><span class="line">-v ：察看更细部的安装资讯画面</span><br><span class="line">-h ：以安装资讯列显示安装进度</span><br><span class="line"></span><br><span class="line">范例一：安装 rp-pppoe-3.5-32.1.i386.rpm</span><br><span class="line">rpm -ivh rp-pppoe-3.5-32.1.i386.rpm</span><br><span class="line">Preparing...     ####################################### [100%]</span><br><span class="line">   1:rp-pppoe    ####################################### [100%] </span><br><span class="line"></span><br><span class="line">范例二、一口气安装两个以上的软件时：</span><br><span class="line">rpm -ivh a.i386.rpm b.i386.rpm *.rpm</span><br><span class="line"><span class="meta">#</span> 后面直接接上许多的软件文件！</span><br><span class="line"></span><br><span class="line">范例三、直接由网络上面的某个文件安装，以网址来安装：</span><br><span class="line">rpm -ivh http://website.name/path/pkgname.rpm</span><br></pre></td></tr></table></figure>
<p>rpm 安装时常用的选项与参数说明</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>可下达的选项</th>
<th>代表意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>—nodeps</td>
<td>使用时机：当发生软件属性相依问题而无法安装，但你执意安装时 危险性： 软件会有相依性的原因是因为彼此会使用到对方的机制或功能，如果强制安装而不考虑软件的属性相依， 则可能会造成该软件的无法正常使用！</td>
</tr>
<tr>
<td>—replacefiles</td>
<td>使用时机： 如果在安装的过程当中出现了『某个文件已经被安装在你的系统上面』的资讯，又或许出现版本不合的信息 (confilcting files) 时，可以使用这个参数来直接覆盖文件。 危险性： 覆盖的动作是无法复原的！所以，你必须要很清楚的知道被覆盖的文件是真的可以被覆盖喔！否则会欲哭无泪！</td>
</tr>
<tr>
<td>—replacepkgs</td>
<td>使用时机： 重新安装某个已经安装过的软件！如果你要安装一堆 RPM 软件文件时，可以使用 rpm -ivh *.rpm ，但若某些软件已经安装过了， 此时系统会出现『某软件已安装』的资讯，导致无法继续安装。此时可使用这个选项来重复安装喔！</td>
</tr>
<tr>
<td>—force</td>
<td>使用时机：这个参数其实就是 —replacefiles 与 —replacepkgs 的综合体！</td>
</tr>
<tr>
<td>—test</td>
<td>使用时机： 想要测试一下该软件是否可以被安装到使用者的 Linux 环境当中，可找出是否有属性相依的问题。范例为： rpm -ivh pkgname.i386.rpm —test</td>
</tr>
<tr>
<td>—justdb</td>
<td>使用时机： 由於 RPM 数据库破损或者是某些缘故产生错误时，可使用这个选项来升级软件在数据库内的相关资讯。</td>
</tr>
<tr>
<td>—nosignature</td>
<td>使用时机： 想要略过数码签章的检查时，可以使用这个选项。</td>
</tr>
<tr>
<td>—prefix 新路径</td>
<td>使用时机： 要将软件安装到其他非正规目录时。举例来说，你想要将某软件安装到 /usr/local 而非正规的 /bin, /etc 等目录， 就可以使用『 —prefix /usr/local 』来处理了。</td>
</tr>
<tr>
<td>—noscripts</td>
<td>使用时机：不想让该软件在安装过程中自行运行某些系统命令。 说明： RPM 的优点除了可以将文件放置到定位之外，还可以自动运行一些前置作业的命令，例如数据库的初始化。 如果你不想要让 RPM 帮你自动运行这一类型的命令，就加上他吧！</td>
</tr>
</tbody>
</table>
</div>
<h6 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh *.rpm </span><br><span class="line">rpm -Fvh *.rpm</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-Uvh</td>
<td>后面接的软件即使没有安装过，则系统将予以直接安装； 若后面接的软件有安装过旧版，则系统自动升级至新版；</td>
</tr>
<tr>
<td>-Fvh</td>
<td>如果后面接的软件并未安装到你的 Linux 系统上，则该软件不会被安装；亦即只有已安装至你 Linux 系统内的软件会被『升级』！</td>
</tr>
</tbody>
</table>
</div>
<h6 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa                              &lt;==已安装软件</span><br><span class="line">rpm -q[licdR] 已安装的软件名称       &lt;==已安装软件</span><br><span class="line">rpm -qf 存在於系统上面的某个档名     &lt;==已安装软件</span><br><span class="line">rpm -qp[licdR] 未安装的某个文件名称  &lt;==查阅RPM文件</span><br><span class="line"></span><br><span class="line">选项与参数：</span><br><span class="line">查询已安装软件的资讯：</span><br><span class="line">-q  ：仅查询，后面接的软件名称是否有安装；</span><br><span class="line">-qa ：列出所有的，已经安装在本机 Linux 系统上面的所有软件名称；</span><br><span class="line">-qi ：列出该软件的详细资讯 (information)，包含开发商、版本与说明等；</span><br><span class="line">-ql ：列出该软件所有的文件与目录所在完整档名 (list)；</span><br><span class="line">-qc ：列出该软件的所有配置档 (找出在 /etc/ 底下的档名而已)</span><br><span class="line">-qd ：列出该软件的所有说明档 (找出与 man 有关的文件而已)</span><br><span class="line">-qR ：列出与该软件有关的相依软件所含的文件 (Required 的意思)</span><br><span class="line">-qf ：由后面接的文件名称，找出该文件属於哪一个已安装的软件；</span><br><span class="line">查询某个 RPM 文件内含有的资讯：</span><br><span class="line">-qp[icdlR]：注意 -qp 后面接的所有参数以上面的说明一致。但用途仅在於找出</span><br><span class="line">	    某个 RPM 文件内的资讯，而非已安装的软件资讯！注意！</span><br></pre></td></tr></table></figure>
<p>练习</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">例题：</span><br><span class="line">我想要知道我的系统当中，以 c 开头的软件有几个，如何实做？</span><br><span class="line">我的 WWW 服务器为 Apache ，我知道他使用的 RPM 软件档名为 httpd 。现在，我想要知道这个软件的所有配置档放置在何处，可以怎么作？</span><br><span class="line">承上题，如果查出来的配置文件已经被我改过，但是我忘记了曾经修改过哪些地方，所以想要直接重新安装一次该软件，该如何作？</span><br><span class="line">如果我误砍了某个重要文件，例如 /etc/crontab，偏偏不晓得他属於哪一个软件，该怎么办？</span><br><span class="line">答：</span><br><span class="line">rpm -qa | grep ^c | wc -l</span><br><span class="line">rpm -qc httpd</span><br><span class="line">假设该软件在网络上的网址为：</span><br><span class="line">http://web.site.name/path/httpd-x.x.xx.i386.rpm</span><br><span class="line">则我可以这样做：</span><br><span class="line">rpm -ivh http://web.site.name/path/httpd-x.x.xx.i386.rpm --replacepkgs</span><br><span class="line">虽然已经没有这个文件了，不过没有关系，因为 RPM 有记录在 /var/lib/rpm 当中的数据库啊！所以直接下达：</span><br><span class="line">rpm -qf /etc/crontab</span><br><span class="line">就可以知道是那个软件罗！重新安装一次该软件即可！</span><br></pre></td></tr></table></figure>
<h6 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -e ***  # 可能会因为依赖的关系，导致卸载失败</span><br><span class="line">rpm -e *** --nodeps  # 强制卸载</span><br><span class="line"></span><br><span class="line">rpm --rebuilddb  # 当rpm数据库/var/lib/rpm内的文件破损，可以使用这个命令重建数据库(很慢)</span><br></pre></td></tr></table></figure>
<h5 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shang.at/post/操作系统-centos7修改hostname/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="王尚">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="努力，奋斗">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/post/操作系统-centos7修改hostname/" class="post-title-link" itemprop="url">操作系统-centos7修改hostname</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-23 12:31:11" itemprop="dateCreated datePublished" datetime="2020-06-23T12:31:11+08:00">2020-06-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-26 11:29:49" itemprop="dateModified" datetime="2020-07-26T11:29:49+08:00">2020-07-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/操作系统/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在CentOS7中，有三种定义的主机名:静态的（static）、瞬态的（transient）、灵活的（pretty）。“静态”主机名也称为内核主机名，是系统在启动时从/etc/hostname自动初始化的主机名。“瞬态”主机名是在系统运行时临时分配的主机名，例如，通过DHCP或mDNS服务器分配。静态主机名和瞬态主机名都遵从作为互联网域名同样的字符限制规则。而另一方面，“灵活”主机名则允许使用自由形式（包括特殊/空白字符）的主机名，以展示给终端用户。</p>
<h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@Geeklp201 ~]# hostnamectl   #查看一下当前主机名的情况</span><br><span class="line">   Static hostname: Geeklp201</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 77efa27de81d470883b5bb0ed04f468c</span><br><span class="line">           Boot ID: fa62bd1c0f5e4e53a0691fb97971594f</span><br><span class="line">    Virtualization: vmware</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-693.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line">[root@Geeklp201 ~]# hostnamectl set-hostname geeklp --static</span><br><span class="line">[root@Geeklp201 ~]# hostnamectl status</span><br><span class="line">   Static hostname: geeklp</span><br><span class="line">   Pretty hostname: Geeklp201</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 77efa27de81d470883b5bb0ed04f468c</span><br><span class="line">           Boot ID: fa62bd1c0f5e4e53a0691fb97971594f</span><br><span class="line">    Virtualization: vmware</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-693.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line"></span><br><span class="line">重启VM</span><br></pre></td></tr></table></figure>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><p>通过修改文件/etc/hostname来实现主机名的修改。把该文件内容替换成自己想要的主机名重启即可。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">王尚</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">148</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王尚</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>

  <script defer src="//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js"></script>
    <script defer src="//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three-waves.min.js"></script>


  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

</body>
</html>